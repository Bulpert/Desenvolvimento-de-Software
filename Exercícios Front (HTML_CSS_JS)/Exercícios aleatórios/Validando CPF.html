<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Validando CPF</title>
</head>

<body>
	
	
<label>Informe seu CPF: </label><input id="cpf" onMouseOut="return validarCPF()" >	
	
	
	
<div id="resultado"></div>
	
	
<script>
	
	
	
function validarCPF (cpfInformado){

	var cpfInformado = document.getElementById('cpf').value;
	var apenasNumeroCPF =''
	
	
	var penultimaPosicao = 0
	var penultimoNumero = 0
	var somaDoPenultimoValor = 0
	
	var contador = 10
	
	
	
	
	
	
	
	
	for(let i = 0;i < cpfInformado.length;i++) {
		
		if(isNaN(cpfInformado[i]) == false) {
			
			
			apenasNumeroCPF += cpfInformado[i]
			
			somaDoPenultimoValor += cpfInformado[i] * contador
			
			
			
			contador--;
			
			
			if(contador == 1){
				
				
				break
			}
		} 
		
	}
	
	if(somaDoPenultimoValor % 11 < 2){
		penultimoNumero = 0
	} else {
		penultimoNumero =  11 - (somaDoPenultimoValor % 11)
	}
	
	
	
	
	
	/////////////////////////////////////////////////////////

	
	var ultimaPosicao = 0 
	var ultimoNumero = 0
	var somaDoUltimoValor = 0
	
	var contador = 11
	
	
	
	
	for(let i = 0;i < cpfInformado.length;i++) {
		
		if(isNaN(cpfInformado[i]) == false) {
			
			if(contador > 2) {
				
				
				somaDoUltimoValor += cpfInformado[i] * contador

				contador--;
			} 	
			
			if(contador == 2) {
				
			
				somaDoUltimoValor += penultimoNumero * contador

				
				
				contador--;
			}
			
		
			
			
			if(contador == 1){
				
				
				break
			}
		} 
		
	}
	
	if(somaDoUltimoValor % 11 < 2){
		ultimoNumero = 0
	} else {
		ultimoNumero =  11 - (somaDoUltimoValor % 11)
	}
	
	
	///////////////////////////////////////////////////////
	
	
	
	var tamanho = cpfInformado.length
	
	penultimaPosicao = cpfInformado.charAt(tamanho-2) 
	ultimaPosicao = cpfInformado.charAt(tamanho-1) 
	
	
	if(penultimaPosicao == penultimoNumero && ultimaPosicao == ultimoNumero){
		
		
		document.getElementById('resultado').innerHTML = `
	
	CPF sem Máscara: ${apenasNumeroCPF}${penultimaPosicao}${ultimaPosicao} 

	<br>

	Primeiro Valor somado: ${somaDoPenultimoValor}   

	<br>

	Primeiro caractere: ${penultimoNumero}

	<hr>

	Segundo Valor somado: ${somaDoUltimoValor}

	<br>

	Segundo caractere: ${ultimoNumero}

	<hr>

	 Penultima ${penultimaPosicao} e Ultimo: ${ultimaPosicao} 

`
	} else {
		
		document.getElementById('resultado').innerHTML = `
	
	CPF Inválido

`
	}
	
	
}


</script>
</body>
</html>
