<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Invertendo</title>
</head>

<body>
	
	
<label>Informe seu cnpj: </label><input id="cnpj" onMouseOut="return inverter()" >	
	
	
	
<div id="resultado"></div>
	
	
<script>
	
	
	
function inverter (valorInformado){


	var valorInvertido =''
	var valorInformado = document.getElementById('cnpj').value
	
	
	var tamanhoCNPJ = valorInformado.length
	var contador = 2
	
	var somaDoPenultimoValor = 0
	var penultimoNumero = 0 
	
	var somaDoUltimoValor = 0
	var ultimoNumero = 0 
	
	
	for(i = valorInformado.length-1;i>=0;i--){
		
		if(isNaN(valorInformado[i]) == false){
			valorInvertido += valorInformado[i]
			
			
			somaDoPenultimoValor += valorInformado[i] * contador
			
			contador++
			
			if(contador == 10){
				contador = 2
			}
		}
		
	}
	
	if(somaDoPenultimoValor % 11 < 2){
		penultimoNumero = 0
	} else {
		penultimoNumero =  11 - (somaDoPenultimoValor % 11)
	}
	
	
	
	var contadorII = 2
	
	
	for(i = valorInformado.length-1;i>=0;i--){
		
		if(isNaN(valorInformado[i]) == false){
			
			
			if(contadorII == 2 && i > 10){
				
				somaDoUltimoValor += penultimoNumero * contadorII

				contadorII++
			}
			
			
			if(contadorII > 2){
				
				somaDoUltimoValor += valorInformado[i] * contadorII

				contadorII++
			}
			
				if(contadorII == 2){
				
				somaDoUltimoValor += valorInformado[i] * contadorII

				contadorII++
			}
			
			
			
			if(contadorII == 10){
				contadorII = 2
			}
		}
		
	}
	
	if(somaDoUltimoValor % 11 < 2){
		ultimoNumero = 0
	} else {
		ultimoNumero =  11 - (somaDoUltimoValor % 11)
	}
	
	
	
	
	document.getElementById('resultado').innerHTML = `

	Valor Invertido: ${valorInvertido}

	<br>
	Tamanho: ${tamanhoCNPJ}
	<br>
	Soma Penultimo: ${somaDoPenultimoValor}  Soma Ultimo: ${somaDoUltimoValor}
	<br><br>

    Penultimo Numero ${penultimoNumero} Ultimo Numero ${ultimoNumero}

<br><BR>
	CPF final ${valorInformado}-${penultimoNumero}${ultimoNumero}
	

		`
}

</script>
</body>
</html>
